# 路径修复说明

## 问题描述

用户遇到了"加载表元数据失败，请检查文件路径！"的错误。

## 问题原因

HTML文件位于 `dmDataPlan/html/` 目录中，而表元数据JSON文件位于 `dmDataPlan/config/` 目录中。原来的路径 `config/table_metadata.json` 是相对于HTML文件目录的，但实际文件在上一级目录的config文件夹中。

## 解决方案

已将以下文件中的路径从 `config/table_metadata.json` 修改为 `../config/table_metadata.json`：

1. `dmDataPlan/html/o_line_management.html`
2. `dmDataPlan/html/o_erGenHtml.html`
3. `dmDataPlan/html/test_json_enhancement.html`
4. `dmDataPlan/html/test_json_flow.html`

## 文件结构

```
dmDataPlan/
├── config/
│   └── table_metadata.json  ← 表元数据文件
├── html/
│   ├── o_line_management.html  ← 关系创建页面
│   ├── o_erGenHtml.html        ← ER关系图页面
│   ├── test_json_enhancement.html  ← 测试页面
│   ├── test_json_flow.html     ← 测试页面
│   └── test_path.html          ← 新增的路径测试页面
└── ...
```

## 测试方法

### 方法1: 使用路径测试页面
1. 打开 `dmDataPlan/html/test_path.html` 页面
2. 页面会自动测试路径是否正确
3. 点击"测试表元数据"按钮验证数据加载

### 方法2: 使用增强功能测试页面
1. 打开 `dmDataPlan/html/test_json_enhancement.html` 页面
2. 点击"加载表元数据"按钮
3. 查看是否显示成功信息

### 方法3: 使用关系创建页面
1. 打开 `dmDataPlan/html/o_line_management.html` 页面
2. 查看数据库下拉列表是否自动填充
3. 选择数据库后查看表列表是否显示

## 启动服务器

由于您使用的是Windows PowerShell，需要使用以下命令启动服务器：

```powershell
# 方法1: 分步执行
cd dmDataPlan
python python/start_server.py

# 方法2: 使用分号分隔
cd dmDataPlan; python python/start_server.py
```

## 验证步骤

1. **启动服务器**: 使用上述命令启动Python服务器
2. **打开测试页面**: 在浏览器中打开 `http://localhost:8080/html/test_path.html`
3. **检查路径**: 页面应该显示"✅ 路径测试成功！"
4. **测试数据加载**: 点击"测试表元数据"按钮
5. **验证功能**: 打开关系创建页面，检查数据库下拉列表是否正常

## 预期结果

修复后，您应该看到：

- ✅ 路径测试成功
- ✅ 表元数据加载成功
- ✅ 数据库下拉列表自动填充（dim, dm_pass_atp, dm_tp等）
- ✅ 选择数据库后表列表正常显示
- ✅ 表选择JSON生成功能正常
- ✅ 关系JSON查看功能正常

## 故障排除

如果仍然遇到问题：

1. **检查文件是否存在**: 确认 `dmDataPlan/config/table_metadata.json` 文件存在
2. **检查服务器状态**: 确认Python服务器正在运行
3. **检查浏览器控制台**: 按F12查看是否有JavaScript错误
4. **检查网络请求**: 在浏览器开发者工具的Network标签中查看请求状态

## 联系支持

如果问题仍然存在，请提供：
- 浏览器控制台的错误信息
- 服务器启动日志
- 具体的错误截图
